SUBCLASSES = ["Pvalb", "Sst", "Lamp5", "Vip", "Sncg"]

rule download_data:
    output:
        directory("data/bugeon")
    shell:
        """
        wget https://figshare.com/ndownloader/files/38046633
        unzip -q 38046633 -d data/bugeon
        rm 38046633
        """
        
rule state_state_modulation:
    input:
        data_dir = "data/bugeon/"
    params:
        stimulus = "Blank"
    output:
        data = "results/pandas/activity.h5ad",
        figure = "figures/figure1/state_modulation.png"
    script:
        "fig1_state_state_modulation.py"

rule example_trial:
    input:
        directory("data/bugeon/SB026/2019-10-16/")
    params:
        experiment = "SB026/2019-10-16/",
        stimulus = "Blank"
    output:
        figure = "figures/figure1/example_trial.png"
    script:
        'fig1_example_trial.py'

rule preprocess:
    input: data_dir = "data/bugeon/"
    output: anndata = "data/anndata/bugeon.h5ad"
    script: "preprocess_bugeon.py"
    
